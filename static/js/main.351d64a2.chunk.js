(this.webpackJsonpspotifood=this.webpackJsonpspotifood||[]).push([[0],{42:function(e,t,a){e.exports=a.p+"static/media/logo.c4b73443.png"},45:function(e,t,a){e.exports=a(85)},72:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(19),l=a.n(r),c=a(12),s=a(5),o=a(6),u=a(8),m=a(7),p=a(9),d=a(21),f=a(13),h=a(16),v=a(25),b=a(18),E=a.n(b),y=a(26),g=a(22),O=a.n(g),j=O.a.create({baseURL:"http://www.mocky.io"}),N=function(e){var t={};return(Object.keys(e).filter((function(t){if(e[t]>0||e[t])return Object(h.a)({},t,e[t])}))||{}).map((function(a){return t[a]=e[a]})),t},w=function(e){return function(){var t=Object(y.a)(E.a.mark((function t(a,n){var i,r,l,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n().authorization.access_token,s=i,r=O.a.create({baseURL:"https://api.spotify.com",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+s}}),l=N(e),t.next=5,r.get("/v1/browse/featured-playlists",{params:l});case 5:c=t.sent,a({type:"FETCH_FEATURED_PLAYLISTS",payload:c.data.playlists});case 7:case"end":return t.stop()}var s}),t)})));return function(e,a){return t.apply(this,arguments)}}()},F=function(e){return function(t){t({type:"FETCH_AUTHORIZATION_CODE",payload:e})}},C=(a(72),function(e){return i.a.createElement("div",{className:"ui segment "+e.height},i.a.createElement("div",{className:"ui active inverted dimmer"},i.a.createElement("div",{className:"ui small text loader"},e.text)))}),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={dateFormat:"^(\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2})$",validTimestamp:!0,validLimit:!0,validOffset:!0,unauthorized:!1,country:"",locale:"",timestamp:"",limit:20,offset:0},a.getFeaturedPlaylists=function(){var e=Object(v.a)({},a.mapStateToFilter());a.formValidation(e)&&a.props.fetchFeaturedPlaylists(e).catch((function(e){401===e.response.status&&a.setState({unauthorized:!0})}))},a.mapStateToFilter=function(){return{country:a.state.country,locale:a.state.locale,timestamp:a.state.timestamp,limit:a.state.limit,offset:a.state.offset}},a.onInputChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.submitForm=function(e){e.preventDefault(),a.getFeaturedPlaylists()},a.formValidation=function(e){var t=new RegExp(a.state.dateFormat).test(e.timestamp)||""===e.timestamp,n=e.limit>0&&e.limit<=50||""===e.limit,i=e.offset>=0||""===e.offset;return a.setState({validTimestamp:t,validLimit:n,validOffset:i}),n&&i&&t},a.buildFieldsObject=function(){var e={};return a.props.filter.map((function(t){return e[t.id]=Object(v.a)({},t)})),e},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchFilterData(),this.getFeaturedPlaylists(),this.intervalId=setInterval((function(){e.getFeaturedPlaylists()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){if(this.state.unauthorized)return this.setState({unauthorized:!1}),i.a.createElement(f.a,{to:"/auth"});if(!this.props.filter.length)return i.a.createElement(C,{text:"Loading filter data ...",height:"small-height"});var e=this.buildFieldsObject();return i.a.createElement("div",{className:"ui segment app--full-background-color"},i.a.createElement("h2",null,"Filter"),i.a.createElement("form",{onSubmit:this.submitForm,className:"ui form"},i.a.createElement("div",{className:"fields"},i.a.createElement("div",{className:"eight wide field"},i.a.createElement("label",null,e.country.name),i.a.createElement("select",{className:"ui dropdown",name:"country",onChange:this.onInputChange},i.a.createElement("option",{value:""},e.country.name),e.country.values.map((function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.name)})))),i.a.createElement("div",{className:"eight wide field"},i.a.createElement("label",null,e.locale.name),i.a.createElement("select",{className:"ui dropdown",name:"locale",onChange:this.onInputChange},i.a.createElement("option",{value:""},e.locale.name),e.locale.values.map((function(e,t){return i.a.createElement("option",{key:t,value:e.value},e.name)}))))),i.a.createElement("div",{className:"fields"},i.a.createElement("div",{className:this.state.validTimestamp?"eight wide field":"eight wide field error"},i.a.createElement("label",null,e.timestamp.name),i.a.createElement("div",{className:"ui input"},i.a.createElement("input",{type:"text",name:"timestamp",onChange:this.onInputChange,placeholder:e.timestamp.name}))),i.a.createElement("div",{className:this.state.validLimit?"four wide field":"four wide field error"},i.a.createElement("label",null,e.limit.name),i.a.createElement("div",{className:"ui input"},i.a.createElement("input",{type:"number",name:"limit",onChange:this.onInputChange,placeholder:e.limit.name}))),i.a.createElement("div",{className:this.state.validOffset?"four wide field":"four wide field error"},i.a.createElement("label",null,e.offset.name),i.a.createElement("div",{className:"ui input"},i.a.createElement("input",{type:"number",name:"offset",onChange:this.onInputChange,placeholder:e.offset.name})))),i.a.createElement("div",{className:"wide app--align-right app--bottom-align app--submit-container"},i.a.createElement("button",{className:"ui button app--button app--primary-button app--border-button",type:"submit"},"FILTER"))))}}]),t}(n.Component),T=Object(c.b)((function(e){return{filter:e.filter}}),{fetchFilterData:function(){return function(){var e=Object(y.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/v2/5a25fade2e0000213aa90776");case 2:a=e.sent,t({type:"FETCH_FILTER_DATA",payload:a.data.filters});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fetchFeaturedPlaylists:w})(k),I=a(44),A=function(e){return i.a.createElement("div",{className:"column"},i.a.createElement("div",{className:"ui raised segment"},i.a.createElement("div",{className:"ui unstackable items"},i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"ui small image"},i.a.createElement("img",{src:e.playlist.images[0].url,alt:e.playlist.name})),i.a.createElement("div",{className:"content"},i.a.createElement("h2",{className:"header"},e.playlist.name),i.a.createElement("div",{className:"meta"}),i.a.createElement("div",{className:"description"},i.a.createElement("span",null,e.playlist.description)))))))},x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={playlists:[],term:""},a.filterPlaylists=function(){return Object(I.a)(a.props.playlists.items).filter((function(e){return e.name.toLowerCase().indexOf(a.state.term)>=0}))},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.playlists.items)return i.a.createElement(C,{text:"Loading playlists ...",height:"medium-height"});var t=this.filterPlaylists();return i.a.createElement("div",{className:"ui segment app--full-background-color"},i.a.createElement("h2",null,"Featured Playlists"),i.a.createElement("br",null),i.a.createElement("div",{className:"ui fluid big icon input"},i.a.createElement("input",{type:"text",value:this.state.term,onChange:function(t){e.setState({term:t.target.value})},placeholder:"Search for a playlist..."}),i.a.createElement("i",{className:"search icon app--icon-primary-color"})),i.a.createElement("br",null),i.a.createElement("div",{className:"ui two column stackable grid"},t.map((function(e){return i.a.createElement(A,{key:e.id,playlist:e})}))))}}]),t}(n.Component),z=Object(c.b)((function(e){return{filter:e.filter,playlists:e.playlists,authorization:e.authorization}}),{fetchFeaturedPlaylists:w,fetchAuthorization:F})(x),_=a(42),L=a.n(_),S=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"ui container app--full-height"},i.a.createElement("div",{className:"ui basic center aligned segment app--header"},i.a.createElement("img",{src:L.a,alt:"Spotifood",height:"100"})),i.a.createElement(T,null),i.a.createElement(z,null),i.a.createElement("br",null))}}]),t}(n.Component),D=a(29),P=a.n(D),R=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e,t=(e=this.props.location.hash,P.a.parse(e));this.props.fetchAuthorization(t)}},{key:"render",value:function(){return this.props.authorization?i.a.createElement(f.a,{to:"/home"}):i.a.createElement(C,{text:"Identifying User ...",height:"full-height"})}}]),t}(i.a.Component),H=Object(c.b)((function(e){return{authorization:e.authorization}}),{fetchAuthorization:F})(R),U=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=t?e+"?"+P.a.stringify(t):e;return a}("https://accounts.spotify.com/authorize",{client_id:"05505a02959540328c55a270621221c3",response_type:"token",redirect_uri:"https://wvpaz.github.io/spotifood.github.io/callback"});window.location.href=e}},{key:"render",value:function(){return i.a.createElement(C,{text:"Getting Access ...",height:"full-height"})}}]),t}(i.a.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"app--full-height"},i.a.createElement(d.a,{basename:"/spotifood.github.io"},i.a.createElement(f.d,null,i.a.createElement(f.b,{path:"/home",component:S}),i.a.createElement(f.b,{path:"/callback",component:H}),i.a.createElement(f.b,{path:"/auth",component:U}),i.a.createElement(f.a,{exact:!0,from:"/",to:"auth"}))))}}]),t}(n.Component),B=a(14),J=Object(B.c)({filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FILTER_DATA":return t.payload;default:return e}},playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FEATURED_PLAYLISTS":return t.payload;default:return e}},authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_AUTHORIZATION_CODE":return t.payload;default:return e}}}),V=a(43),Y=Object(B.d)(J,Object(B.a)(V.a)),Z=document.getElementById("app");l.a.render(i.a.createElement(c.a,{store:Y},i.a.createElement(M,null)),Z)}},[[45,1,2]]]);
//# sourceMappingURL=main.351d64a2.chunk.js.map